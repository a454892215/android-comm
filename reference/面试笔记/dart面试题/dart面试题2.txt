
# ä¸€ã€Dart è¯­è¨€åŸºç¡€ï¼ˆå¿…é—®ï¼‰

## 1ï¸âƒ£ Dart æ˜¯å¼ºç±»å‹è¿˜æ˜¯å¼±ç±»å‹ï¼Ÿæ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€ï¼Ÿ
  å¼ºç±»å‹ï¼Œ é™æ€ç±»å‹ï¼ˆä½†æ”¯æŒç±»å‹æ¨æ–­ï¼‰

ğŸ“Œ Dart åœ¨ **ç¼–è¯‘æœŸå°±åšç±»å‹æ£€æŸ¥**ï¼ˆAOT/JIT éƒ½æ˜¯ï¼‰

## 2ï¸âƒ£ `var`ã€`dynamic`ã€`Object` çš„åŒºåˆ«ï¼Ÿ
| ç±»å‹        | ç¼–è¯‘æœŸæ£€æŸ¥      | è¿è¡ŒæœŸæ£€æŸ¥    |
| --------- | ---------- | -------- |
| `var`     | âœ… æœ‰ï¼ˆæ¨æ–­åå›ºå®šï¼‰ | âœ…        |
| `Object`  | âœ… æœ‰        | âŒï¼ˆéœ€å¼ºè½¬ï¼‰   |
| `dynamic` | âŒ æ²¡æœ‰       | âœ…ï¼ˆè¿è¡Œæ—¶æŠ¥é”™ï¼‰ |

dartä¸­å£°æ˜å˜é‡çš„æ‰€æœ‰æ–¹å¼ï¼š
typedef IntOp = int Function(int a, int b); // åœ¨ Dart ä¸­å« å‡½æ•°ç±»å‹åˆ«åï¼ˆtypedefï¼‰
                                            è¿™ç§å‡½æ•°ç±»å‹åˆ«åï¼Œå®é™…ä¸Šå°±æ˜¯ç”³æ˜ä¸€ä¸ªå‡½æ•°ç­¾åï¼Œä½†æ˜¯æ²¡æœ‰å®ç°ï¼Œä¸€èˆ¬åšå‡½æ•°ä¼ å‚é™åˆ¶
class VariableDemo {
  // 1ï¸âƒ£ æ™®é€šå˜é‡
  int a = 10;                  // æ˜¾å¼ç±»å‹ï¼Œéç©ºï¼Œç±»å‹å›ºå®š
  var b = 20;                  // è‡ªåŠ¨ç±»å‹æ¨å¯¼ï¼Œæ¨åˆ°å®Œæˆç±»å‹å›ºå®šï¼Œä¸èƒ½èµ‹å€¼å…¶ä»–ç±»å‹
  dynamic c = "hello";         // åŠ¨æ€ç±»å‹ï¼Œå¯ä»¥åŠ¨æ€èµ‹å€¼å…¶ä»–ç±»å‹
  Object d = 30;               // éç©ºçˆ¶ç±»ç±»å‹
  Object? e;                   // å¯ç©ºçˆ¶ç±»ç±»å‹
  int? f;                       // å¯ç©ºç±»å‹

  // 2ï¸âƒ£ final / const
  final int g = 100;           // è¿è¡Œæ—¶å¸¸é‡ï¼Œåªèƒ½èµ‹å€¼ä¸€æ¬¡
  final h = "final var";       // è‡ªåŠ¨æ¨å¯¼ç±»å‹
  late final int i;            // å»¶è¿Ÿåˆå§‹åŒ–ï¼Œåªèƒ½èµ‹å€¼ä¸€æ¬¡
  const int j = 200;           // ç¼–è¯‘æ—¶å¸¸é‡

  // 3ï¸âƒ£ é›†åˆå˜é‡
  List<int> list1 = [1, 2, 3];          // List
  var list2 = <String>["a", "b"];       // è‡ªåŠ¨ç±»å‹æ¨å¯¼
  final List<int> list3 = [4, 5, 6];    // final é›†åˆï¼ˆé›†åˆä¸å¯é‡æ–°èµ‹å€¼ï¼Œä½†å¯ä¿®æ”¹å…ƒç´ ï¼‰
  const List<int> list4 = [7, 8, 9];    // const é›†åˆï¼Œç¼–è¯‘æ—¶å¸¸é‡
  Set<int> set1 = {1, 2, 3};            // Set
  Map<String, int> map1 = {"a": 1};     // Map

  // 4ï¸âƒ£ å‡½æ•°å˜é‡
  int Function(int, int) sum = (a, b) => a + b;  // åŒ¿åå‡½æ•°èµ‹å€¼
  IntOp multiply = (a, b) => a * b;              // typedef ç±»å‹å‡½æ•°

  // 5ï¸âƒ£ late å˜é‡
  late int k;                     // å»¶è¿Ÿåˆå§‹åŒ–
  late final int l;               // å»¶è¿Ÿåˆå§‹åŒ– + final

  // 6ï¸âƒ£ å¤šå˜é‡å£°æ˜
  int m = 1, n = 2, o = 3;
  var p = 10, q = "hello";

  // 7ï¸âƒ£ å¼‚æ­¥ç›¸å…³å˜é‡ï¼ˆå¯å­˜å‚¨ Future / Streamï¼‰
  Future<int> futureValue = Future.value(42);
  Stream<int> streamValue = Stream.fromIterable([1, 2, 3]);
}



## 3ï¸âƒ£ Dart ä¸­ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡å—ï¼Ÿ **æ˜¯çš„**
* int / double / bool éƒ½æ˜¯å¯¹è±¡
* æ²¡æœ‰ Java é‚£ç§ primitive

# äºŒã€å‡½æ•° & è¯­æ³•ç³–ï¼ˆé«˜é¢‘ï¼‰
## 4ï¸âƒ£ Dart æœ‰å“ªäº›å‡½æ•°å†™æ³•ï¼Ÿ
typedef IntBinaryOp = int Function(int a, int b);

class FunctionDemo {
  int value;
  FunctionDemo(this.value);
  // 1ï¸âƒ£ æ™®é€šæ–¹æ³•
  int increment() {
    return value + 1;
  }
  // 2ï¸âƒ£ ç®­å¤´å‡½æ•°ï¼ˆå•è¡¨è¾¾å¼æ–¹æ³•ï¼‰
  int doubleValue() => value * 2;

  // 3ï¸âƒ£ Getter / Setter
  int get squared => value * value;
  set squared(int val) => value = val ~/ value;

  // 4ï¸âƒ£ æ™®é€šåŒ¿åå‡½æ•° / å‡½æ•°è¡¨è¾¾å¼
  var sum = (int a, int b) {
    return a + b;
  };

  // 5ï¸âƒ£ ç®­å¤´åŒ¿åå‡½æ•°
  var triple = (int x) => x * 3;

  // 6ï¸âƒ£ å¼‚æ­¥æ–¹æ³•
  Future<int> fetchValue() async {
    await Future.delayed(Duration(seconds: 1));
    return value;
  }

  Future<int> fetchValue2() async => value * 2;

  // 7ï¸âƒ£ åŒæ­¥ç”Ÿæˆå™¨å‡½æ•°
  Iterable<int> countTo(int n) sync* {
    for (int i = 1; i <= n; i++) yield i;
  }

  // 8ï¸âƒ£ å¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°
  Stream<int> asyncCount(int n) async* {
    for (int i = 1; i <= n; i++) yield i;
  }

  // 9ï¸âƒ£ é«˜é˜¶å‡½æ•°ï¼šæ¥æ”¶å‡½æ•°
  void applyOperation(int a, int b, IntBinaryOp op) {
    print(op(a, b));
  }

  // 10ï¸âƒ£ é«˜é˜¶å‡½æ•°ï¼šè¿”å›å‡½æ•°
  Function multiplier(int x) {
    return (int y) => x * y;
  }
}


## 6ï¸âƒ£ ç®­å¤´å‡½æ•°æœ‰ä»€ä¹ˆé™åˆ¶ï¼Ÿåªèƒ½æœ‰ä¸€è¡Œè¡¨è¾¾å¼ï¼Œä¸èƒ½å†™ `return`

## 7ï¸âƒ£ `String?` å’Œ `String` åŒºåˆ«ï¼Ÿ
* `String`ï¼š**æ°¸è¿œä¸ä¸º null**
* `String?`ï¼šå¯ä»¥ä¸º null
## 8ï¸âƒ£ `!`ã€`?`ã€`??`ã€`??=` åŒºåˆ«ï¼Ÿ
```dart
a!       // æˆ‘ä¿è¯ä¸ä¸º nullï¼ˆéª—ç¼–è¯‘å™¨ï¼‰
a?.b     // null ä¼ æ’­ï¼Œ å¦‚æœaä¸æ˜¯nullæ‰è°ƒç”¨b
a ?? b   // ç©ºåˆå¹¶
a ??= b  // ç©ºåˆ™èµ‹å€¼ å¦‚æœ a ä¸º nullï¼Œèµ‹å€¼
```

## 9ï¸âƒ£ late å…³é”®å­—çš„ä½œç”¨ï¼Ÿlate String name;
* å»¶è¿Ÿåˆå§‹åŒ–
* ç¼–è¯‘æœŸä¿è¯â€œä½¿ç”¨å‰ä¸€å®šä¼šèµ‹å€¼â€

## ğŸ”Ÿ Dart ä¸­ç±»çš„æ„é€ å‡½æ•°æœ‰å“ªäº›ï¼Ÿ7ç§


## 11ï¸âƒ£ `const` æ„é€ å‡½æ•°çš„ä½œç”¨ï¼Ÿç¼–è¯‘æœŸå¸¸é‡ï¼Œå†…å­˜å¤ç”¨

## 12ï¸âƒ£ `extends` vs `implements` vs `with`
| å…³é”®å­—          | å«ä¹‰    |
| ------------ | ----- |
| `extends`    | ç»§æ‰¿å®ç°  |
| `implements` | åªå®ç°æ¥å£ |
| `with`       | æ··å…¥ä»£ç   |

ğŸ“Œ **implements ä¸ç»§æ‰¿å­—æ®µï¼Œåªç»§æ‰¿è¡Œä¸ºï¼ˆä½ åˆšé—®è¿‡ï¼‰**

## 13ï¸âƒ£ mixin æ˜¯ä»€ä¹ˆï¼Ÿå’Œç»§æ‰¿çš„åŒºåˆ«ï¼Ÿ
* è§£å†³å•ç»§æ‰¿é™åˆ¶
* **ä¸æŒæœ‰çŠ¶æ€ï¼ˆæ¨èï¼‰**
* æ›´åƒ trait

# äº”ã€é›†åˆï¼ˆå¿…é—®
## 14ï¸âƒ£ List / Set / Map çš„åŒºåˆ«ï¼Ÿ
| ç±»å‹   | ç‰¹ç‚¹        |
| ---- | --------- |
| List | æœ‰åºã€å¯é‡å¤    |
| Set  | æ— åºã€ä¸é‡å¤    |
| Map  | key-value |

---

## 15ï¸âƒ£ List çš„å¸¸ç”¨é«˜é˜¶æ–¹æ³•ï¼Ÿ
```dart
mapï¼šå°†åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ æ˜ å°„ä¸ºå¦ä¸€ä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ Iterableã€‚ var doubled = nums.map((e) => e * 2).toList();
whereï¼šæ ¹æ®æ¡ä»¶ç­›é€‰å…ƒç´ ï¼Œè¿”å›æ»¡è¶³æ¡ä»¶çš„å­é›†åˆï¼ˆIterableï¼‰ var even = nums.where((e) => e % 2 == 0).toList();
foldï¼š ç´¯åŠ  / èšåˆåˆ—è¡¨å…ƒç´ ï¼Œå¸¦ä¸€ä¸ªåˆå§‹å€¼ã€‚var sum = nums.fold(0, (previous, element) => previous + element);
reduceï¼šç´¯åŠ  / èšåˆåˆ—è¡¨å…ƒç´ ï¼Œæ²¡æœ‰åˆå§‹å€¼ï¼Œä½¿ç”¨åˆ—è¡¨ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåˆå§‹å€¼ã€‚ var sum = nums.reduce((value, element) => value + element);
anyï¼šåˆ¤æ–­åˆ—è¡¨æ˜¯å¦æœ‰è‡³å°‘ä¸€ä¸ªå…ƒç´ æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› bool
everyï¼š åˆ¤æ–­åˆ—è¡¨æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³æ¡ä»¶ï¼Œè¿”å› bool
```
ğŸ“Œ é¢è¯•å®˜çˆ±è®©ä½ **æ‰‹å†™ filter / map**
# å…­ã€å¼‚æ­¥ï¼ˆé‡ç¾åŒºï¼Œé‡ç‚¹ï¼‰
## 16ï¸âƒ£ Dart æ˜¯å•çº¿ç¨‹å—ï¼Ÿ
**æ˜¯ï¼ˆUI Isolateï¼‰**
* æ”¯æŒå¤š Isolate
* éé˜»å¡ IOï¼šæ¶ˆæ¯å¾ªç¯+æ¶ˆæ¯é˜Ÿåˆ—

## 17ï¸âƒ£ `Future` å’Œ `async / await` çš„æœ¬è´¨ï¼Ÿ
```dart
async / await æ˜¯ Future çš„è¯­æ³•ç³–ï¼š å¦‚æœè¿”å›Futureçš„å‡½æ•° ä¸­ æ²¡æœ‰å¼‚æ­¥ï¼Œåˆ™å¯ä»¥ä¸ä½¿ç”¨asyncå£°æ˜å‡½æ•°


## 18ï¸âƒ£ Future.microtask å’Œ Future åŒºåˆ«ï¼Ÿ
* `microtask` ä¼˜å…ˆçº§æ›´é«˜
* å…ˆäº event queue æ‰§è¡Œ
ğŸ“Œ Flutter å¸§è°ƒåº¦ç›¸å…³


## 19ï¸âƒ£ Isolate å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ
| å¯¹æ¯” | Isolate |
| -- | ------- |
| å†…å­˜ | ä¸å…±äº«     |
| é€šä¿¡ | message |
| å®‰å…¨ | æ— é”      |
ğŸ‘‰ Dart **ç”¨éš”ç¦»æ¢å®‰å…¨**
---

# ä¸ƒã€æ³›å‹ & ç±»å‹ç³»ç»Ÿï¼ˆåŠ åˆ†é¡¹ï¼‰
## 20ï¸âƒ£ Dart æ³›å‹æ˜¯è¿è¡ŒæœŸè¿˜æ˜¯ç¼–è¯‘æœŸï¼Ÿ
* **ç¼–è¯‘æœŸæ³›å‹**
* è¿è¡ŒæœŸæœ‰ç±»å‹ä¿¡æ¯ï¼ˆéƒ¨åˆ†æ“¦é™¤ï¼‰
List<int> a;

## 21ï¸âƒ£ `T extends Object` å’Œ `T extends Object?`
* å‰è€…ï¼šT ä¸èƒ½ä¸º null
* åè€…ï¼šT å¯ä»¥ä¸º null

# å…«ã€Dart & Flutter å…³è”é¢˜ï¼ˆé¢è¯•å®˜æœ€çˆ±ï¼‰
## 22ï¸âƒ£ Widget ä¸ºä»€ä¹ˆæ˜¯ä¸å¯å˜çš„ï¼Ÿ
* UI = çŠ¶æ€çš„å‡½æ•°
* æ–¹ä¾¿ diff
* æå‡æ€§èƒ½

---
## 23ï¸âƒ£ ä¸ºä»€ä¹ˆå¤§é‡ Widget æ„é€ å‡½æ•°æ˜¯ constï¼Ÿ
* å‡å°‘ rebuild
* å†…å­˜å¤ç”¨
* ç¼–è¯‘æœŸä¼˜åŒ–
---

## 24ï¸âƒ£ StatefulWidget çš„ state ä¸ºä»€ä¹ˆå•ç‹¬æ‹†ï¼Ÿ
* Widget æ˜¯é…ç½®
* State æ˜¯å¯å˜æ•°æ®
* è§£è€¦ç”Ÿå‘½å‘¨æœŸ
---

# ä¹ã€å¸¸è§â€œå‘é¢˜â€
## 25ï¸âƒ£ `==` å’Œ `identical` åŒºåˆ«ï¼Ÿ
* `==`ï¼šå¯é‡è½½ï¼Œå¦‚æœç±»æ²¡æœ‰é‡è½½ == â†’ é»˜è®¤æ¯”è¾ƒå¼•ç”¨ï¼ˆå†…å­˜åœ°å€ï¼‰
* `identical`ï¼šä¸å¯é‡è½½ ç³»ç»Ÿapi  æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€

---

## 26ï¸âƒ£ `final` vs `const`
| å…³é”®å­—   | æ—¶æœº  |
| ----- | --- |
| final | è¿è¡ŒæœŸ |
| const | ç¼–è¯‘æœŸ |
---

## 27ï¸âƒ£ `switch` æ”¯æŒä»€ä¹ˆç±»å‹ï¼Ÿ
* int
* String
* enum
âŒ ä¸æ”¯æŒèŒƒå›´
---